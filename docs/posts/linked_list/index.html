<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>linked list</title>
    
    
    <style type="text/css" media="all">@import "/style.css";</style>
    <style type="text/css" media="all">@import "/syntax.css";</style>
    
  </head>
  <body>
    <header>
  <span class="site-title" style="font-size:3rem;display:inline-block;vertical-align:middle;"><a href="https://upunder.us"><img src="/favicon.svg" alt="img" width="64rem" height="64rem" style="display:inline-block;vertical-align: middle;"/></a> up under us</span>
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  
</header>

    


<main>
  <article>
    <header>
      <h1>linked list</h1>
    </header>
    <time datetime="2023-10-11T00:00:00">
      2023.10.11 00:00
    </time>
    
    Reading time:
    
    
    
    
    1 min
    
    42 s.
    <div>
      <h3>Table of contents</h3>
      <nav id="TableOfContents"></nav>
    </div>
    <p>Write a linked list in C:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stddef.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdio.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdlib.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> list_head {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">struct</span> list_head <span style="color:#f92672">*</span>next;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">struct</span> list_head <span style="color:#f92672">*</span>prev;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">init_list_head</span>(<span style="color:#66d9ef">struct</span> list_head <span style="color:#f92672">*</span>head) {
</span></span><span style="display:flex;"><span>  head<span style="color:#f92672">-&gt;</span>next <span style="color:#f92672">=</span> head;
</span></span><span style="display:flex;"><span>  head<span style="color:#f92672">-&gt;</span>prev <span style="color:#f92672">=</span> head;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">list_add</span>(<span style="color:#66d9ef">struct</span> list_head <span style="color:#f92672">*</span>head, <span style="color:#66d9ef">struct</span> list_head <span style="color:#f92672">*</span>new_node) {
</span></span><span style="display:flex;"><span>  new_node<span style="color:#f92672">-&gt;</span>next <span style="color:#f92672">=</span> head<span style="color:#f92672">-&gt;</span>next;
</span></span><span style="display:flex;"><span>  new_node<span style="color:#f92672">-&gt;</span>prev <span style="color:#f92672">=</span> head;
</span></span><span style="display:flex;"><span>  head<span style="color:#f92672">-&gt;</span>next<span style="color:#f92672">-&gt;</span>prev <span style="color:#f92672">=</span> new_node;
</span></span><span style="display:flex;"><span>  head<span style="color:#f92672">-&gt;</span>next <span style="color:#f92672">=</span> new_node;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">list_add_tail</span>(<span style="color:#66d9ef">struct</span> list_head <span style="color:#f92672">*</span>head, <span style="color:#66d9ef">struct</span> list_head <span style="color:#f92672">*</span>new_node) {
</span></span><span style="display:flex;"><span>  new_node<span style="color:#f92672">-&gt;</span>next <span style="color:#f92672">=</span> head;
</span></span><span style="display:flex;"><span>  new_node<span style="color:#f92672">-&gt;</span>prev <span style="color:#f92672">=</span> head<span style="color:#f92672">-&gt;</span>prev;
</span></span><span style="display:flex;"><span>  head<span style="color:#f92672">-&gt;</span>prev<span style="color:#f92672">-&gt;</span>next <span style="color:#f92672">=</span> new_node;
</span></span><span style="display:flex;"><span>  head<span style="color:#f92672">-&gt;</span>prev <span style="color:#f92672">=</span> new_node;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">list_del</span>(<span style="color:#66d9ef">struct</span> list_head <span style="color:#f92672">*</span>node) {
</span></span><span style="display:flex;"><span>  node<span style="color:#f92672">-&gt;</span>prev<span style="color:#f92672">-&gt;</span>next <span style="color:#f92672">=</span> node<span style="color:#f92672">-&gt;</span>next;
</span></span><span style="display:flex;"><span>  node<span style="color:#f92672">-&gt;</span>next<span style="color:#f92672">-&gt;</span>prev <span style="color:#f92672">=</span> node<span style="color:#f92672">-&gt;</span>prev;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> student {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">struct</span> list_head list;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">int</span> id;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">int</span> yy;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">int</span> mm;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">int</span> dd;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">printList</span>(<span style="color:#66d9ef">struct</span> list_head <span style="color:#f92672">*</span>head) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">struct</span> list_head <span style="color:#f92672">*</span>current <span style="color:#f92672">=</span> head<span style="color:#f92672">-&gt;</span>next;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">while</span> (current <span style="color:#f92672">!=</span> head) {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">struct</span> student <span style="color:#f92672">*</span>studentNode <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>        (<span style="color:#66d9ef">struct</span> student <span style="color:#f92672">*</span>)((<span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>)current <span style="color:#f92672">-</span> <span style="color:#a6e22e">offsetof</span>(<span style="color:#66d9ef">struct</span> student, list));
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;ID: %d, Date: %d-%d-%d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, studentNode<span style="color:#f92672">-&gt;</span>id, studentNode<span style="color:#f92672">-&gt;</span>yy,
</span></span><span style="display:flex;"><span>           studentNode<span style="color:#f92672">-&gt;</span>mm, studentNode<span style="color:#f92672">-&gt;</span>dd);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    current <span style="color:#f92672">=</span> current<span style="color:#f92672">-&gt;</span>next;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">struct</span> student <span style="color:#f92672">*</span><span style="color:#a6e22e">findNodeByID</span>(<span style="color:#66d9ef">struct</span> list_head <span style="color:#f92672">*</span>head, <span style="color:#66d9ef">int</span> targetID) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">struct</span> list_head <span style="color:#f92672">*</span>current <span style="color:#f92672">=</span> head<span style="color:#f92672">-&gt;</span>next;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">while</span> (current <span style="color:#f92672">!=</span> head) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">struct</span> student <span style="color:#f92672">*</span>studentNode <span style="color:#f92672">=</span>
</span></span><span style="display:flex;"><span>        (<span style="color:#66d9ef">struct</span> student <span style="color:#f92672">*</span>)((<span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>)current <span style="color:#f92672">-</span> <span style="color:#a6e22e">offsetof</span>(<span style="color:#66d9ef">struct</span> student, list));
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (studentNode<span style="color:#f92672">-&gt;</span>id <span style="color:#f92672">==</span> targetID) {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span> studentNode;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    current <span style="color:#f92672">=</span> current<span style="color:#f92672">-&gt;</span>next;
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> NULL;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">struct</span> list_head myList;
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">init_list_head</span>(<span style="color:#f92672">&amp;</span>myList);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">struct</span> student lihua <span style="color:#f92672">=</span> {.list <span style="color:#f92672">=</span> {<span style="color:#f92672">&amp;</span>lihua.list, <span style="color:#f92672">&amp;</span>lihua.list},
</span></span><span style="display:flex;"><span>                          .id <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>                          .yy <span style="color:#f92672">=</span> <span style="color:#ae81ff">2023</span>,
</span></span><span style="display:flex;"><span>                          .mm <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>                          .dd <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>};
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">struct</span> student zhangsan <span style="color:#f92672">=</span> {.list <span style="color:#f92672">=</span> {<span style="color:#f92672">&amp;</span>zhangsan.list, <span style="color:#f92672">&amp;</span>zhangsan.list},
</span></span><span style="display:flex;"><span>                             .id <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>,
</span></span><span style="display:flex;"><span>                             .yy <span style="color:#f92672">=</span> <span style="color:#ae81ff">2023</span>,
</span></span><span style="display:flex;"><span>                             .mm <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>                             .dd <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>};
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">struct</span> student wangwu <span style="color:#f92672">=</span> {.list <span style="color:#f92672">=</span> {<span style="color:#f92672">&amp;</span>wangwu.list, <span style="color:#f92672">&amp;</span>wangwu.list},
</span></span><span style="display:flex;"><span>                           .id <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>,
</span></span><span style="display:flex;"><span>                           .yy <span style="color:#f92672">=</span> <span style="color:#ae81ff">2023</span>,
</span></span><span style="display:flex;"><span>                           .mm <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>                           .dd <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">list_add_tail</span>(<span style="color:#f92672">&amp;</span>myList, <span style="color:#f92672">&amp;</span>lihua.list);
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">list_add_tail</span>(<span style="color:#f92672">&amp;</span>myList, <span style="color:#f92672">&amp;</span>zhangsan.list);
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">list_add</span>(<span style="color:#f92672">&amp;</span>myList, <span style="color:#f92672">&amp;</span>wangwu.list);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;Linked List:</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">printList</span>(<span style="color:#f92672">&amp;</span>myList);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">list_del</span>(<span style="color:#f92672">&amp;</span>zhangsan.list);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">Linked List after removal:</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">printList</span>(<span style="color:#f92672">&amp;</span>myList);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">int</span> targetID <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">struct</span> student <span style="color:#f92672">*</span>foundNode <span style="color:#f92672">=</span> <span style="color:#a6e22e">findNodeByID</span>(<span style="color:#f92672">&amp;</span>myList, targetID);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (foundNode <span style="color:#f92672">!=</span> NULL) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">Found node with ID %d: Date %d-%d-%d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, targetID, foundNode<span style="color:#f92672">-&gt;</span>yy,
</span></span><span style="display:flex;"><span>           foundNode<span style="color:#f92672">-&gt;</span>mm, foundNode<span style="color:#f92672">-&gt;</span>dd);
</span></span><span style="display:flex;"><span>  } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">Node with ID %d not found</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, targetID);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">// XOR Linked list
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">typedef</span> <span style="color:#66d9ef">struct</span> node {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">int</span> val;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">struct</span> node <span style="color:#f92672">*</span>ptr;
</span></span><span style="display:flex;"><span>} <span style="color:#66d9ef">node_t</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">node_t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">xor</span> (<span style="color:#66d9ef">node_t</span> a, <span style="color:#66d9ef">node_t</span> b){
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> ((<span style="color:#66d9ef">int</span>)<span style="color:#f92672">&amp;</span>a <span style="color:#f92672">^</span> (<span style="color:#66d9ef">int</span>)<span style="color:#f92672">&amp;</span>b);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">node_t</span> a,b,c;
</span></span><span style="display:flex;"><span>a.val<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>b.val<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>c.val<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>a.ptr <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>b <span style="color:#f92672">^</span> <span style="color:#f92672">&amp;</span>c;
</span></span><span style="display:flex;"><span>b.ptr <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>a <span style="color:#f92672">^</span> <span style="color:#f92672">&amp;</span>c;
</span></span><span style="display:flex;"><span>c.ptr <span style="color:#f92672">=</span> <span style="color:#f92672">&amp;</span>a <span style="color:#f92672">^</span> <span style="color:#f92672">&amp;</span>b;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">push</span>(<span style="color:#66d9ef">int</span> i, <span style="color:#66d9ef">node_t</span> <span style="color:#f92672">*</span>p) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">node_t</span> <span style="color:#f92672">*</span>node <span style="color:#f92672">=</span> new node;
</span></span><span style="display:flex;"><span>  node<span style="color:#f92672">-&gt;</span>val <span style="color:#f92672">=</span> i;
</span></span><span style="display:flex;"><span>  node<span style="color:#f92672">-&gt;</span>nxt <span style="color:#f92672">=</span> p<span style="color:#f92672">-&gt;</span>nxt;
</span></span><span style="display:flex;"><span>  p<span style="color:#f92672">-&gt;</span>nxt <span style="color:#f92672">=</span> node;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>
    
  </article>
</main>

<a href="https://upunder.us/posts/programming_environment/">Prev: programming environment</a>

<br>

<a href="https://upunder.us/posts/avatar/">Next: avatar</a>

<aside class="latest-posts">
  <div>
    <div class="section-header">
      <h3>LATEST POSTS</h3>
    </div>
    <div class="post-list">
      <ul>
        
        <li><a href="/posts/bijection/">bijection</a></li>
        
        <li><a href="/posts/curves/">curves</a></li>
        
        <li><a href="/posts/calculus/">calculus</a></li>
        
        <li><a href="/posts/prime_algorithms/">prime algorithms</a></li>
        
        <li><a href="/posts/bitwise_operation/">bitwise operation</a></li>
        
      </ul>
    </div>
  </div>
</aside>


    <footer class="site-footer">
  <p>2023 <a href="https://upunder.us">up under us</a></p>
</footer>

  </body>
</html>
