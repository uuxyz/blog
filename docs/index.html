<!DOCTYPE html>
<html lang='en-us'>
  <head>
	<meta name="generator" content="Hugo 0.111.3">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>up under us</title>
    
    
    <style type="text/css" media="all">@import "/css/style.css";</style>
    <style type="text/css" media="all">@import "/css/syntax.css";</style>
    <link rel="alternate" type="application/rss+xml" href="/index.xml" title="up under us">
  </head>
  <body>
    <header>
  <span class="site-title"
    style="font-size:3rem;display:inline-block;vertical-align:middle;">
    <a href="https://upunder.us" style="font-family:uuu">
      <img src="/icon/favicon.svg" alt="img"
        width="64rem"
        height="64rem"
        style="display:inline-block;vertical-align: middle;" /></a>
    up under us</span>
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  
</header>

    
<main><article>
  <h1><a href="https://upunder.us/posts/code_with_magic/">C Code with magic</a></h1>
  <time datetime='2024-02-28T00:00:00'>2024.02.28 00:00</time>
  
  <div>
    Here I want to list several C code powered by magic.
fast inverse square root float Q_rsqrt(float number) { long i; float x2, y; const float threehalfs = 1.5F; x2 = number * 0.5F; y = number; i = *(long *)&amp;y; i = 0x5f3759df - (i &gt;&gt; 1); y = *(float *)&amp;i; y = y * (threehalfs - (x2 * y * y)); // y = y * (threehalfs - (x2 * y * y)); return y; } integer square root int isqrt(int n) { int x = 1; int decreased = 0; for (;;) { int nx = (x + n / x) &gt;&gt; 1; if (x == nx || (nx &gt; x &amp;&amp; decreased)) break; decreased = nx &lt; x; x = nx; } return x; } is square number or not int is_square(int n) { if (1 &lt;&lt; (n &amp; 0x1f) &amp; 0x2030213) { int n_sqrt2 = isqrt(n); return n_sqrt2 * n_sqrt2 == n; } else { return 0; } } 
    
  </div>
</article>
<article>
  <h1><a href="https://upunder.us/posts/quaternion/">quaternion</a></h1>
  <time datetime='2024-01-22T00:00:00'>2024.01.22 00:00</time>
  
  <div>
    Rotate a point $P=(a, b, c)$ counterclockwise around an axis defined by a vector $Q=(x, y, z)$ by an angle $\theta$. This process can be described using the following formula. $$q=\cos\frac{\theta}{2}+\sin\frac{\theta}{2}\left(x\mathbf{i}+y\mathbf{j}+z\mathbf{k}\right)$$ $$q^{-1}=\frac{q^\ast}{|q|^2}$$ $$p=a\mathbf{i}+b\mathbf{j}+c\mathbf{k}$$ $$p^\prime=qpq^{-1}$$
rodrigues&rsquo; rotation formula $$\mathbf{v}_\mathrm{rot}=\mathbf{v}\cos\theta+(\mathbf{k}\times\mathbf{v})\sin\theta+\mathbf{k}~(\mathbf{k}\cdot\mathbf{v})(1-\cos\theta)$$
    
  </div>
</article>
<article>
  <h1><a href="https://upunder.us/posts/lists_of_integrals/">lists of integrals</a></h1>
  <time datetime='2024-01-13T00:00:00'>2024.01.13 00:00</time>
  
  Tags:
  
  <a href='/tags/math'>math</a>
  
  
  <div>
    (I) $$\int\frac{{\rm d}x}{ax+b}=\frac{1}{a}\int\frac{{\rm d}(ax+b)}{ax+b}=\frac{1}{a}\ln|ax+b|+C$$ $$\int(ax+b)^\mu{\rm d}x=\frac{1}{a}\int(ax+b)^\mu{\rm d}(ax+b)=\frac{1}{a(\mu+1)}(ax+b)^{\mu+1}+C$$ $$\int\frac{x}{ax+b}{\rm d}x=\int\frac{1}{a}-\frac{b}{a(ax+b)}{\rm d}x=\frac{1}{a}x-\frac{b}{a}\int\frac{{\rm d}x}{ax+b}$$ $$=\frac{1}{a^2}(ax+b-b\ln|ax+b|)+C$$ $$\int\frac{x^2}{ax+b}{\rm d}x=\int\frac{x}{a}+\frac{b^2}{a^2(ax+b)}-\frac{b}{a^2}{\rm d}x$$ $$=\frac{1}{a^3}\left[\frac{1}{2}(ax+b)^2-2b(ax+b)+b^2\ln|ax+b|\right]+C$$ $$\int\frac{{\rm d}x}{x(ax+b)}=\int\frac{1}{bx}-\frac{a}{b(ax+b)}{\rm d}x$$ $$=-\frac{1}{b}\ln\left|\frac{ax+b}{x}\right|+C$$ $$\int\frac{{\rm d}x}{x^2(ax+b)}=\int\frac{1}{bx^2}-\frac{a}{b^2x}+\frac{a^2}{b^2(ax+b)}{\rm d}x$$ $$=-\frac{1}{bx}+\frac{a}{b^2}\ln\left|\frac{ax+b}{x}\right|+C$$ $$\int\frac{x}{(ax+b)^2}{\rm d}x=\int-\frac{b}{a(ax+b)^2}+\frac{1}{a(ax+b)}{\rm d}x$$ $$=\frac{1}{a^2}\left(\ln\left|ax+b\right|+\frac{b}{ax+b}\right)+C$$ $$\int\frac{x^2}{(ax+b)^2}{\rm d}x=\int\frac{1}{a^2}+\frac{b^2}{a^2(ax+b)^2}-\frac{2b}{a^2(ax+b)}{\rm d}x$$ $$=\frac{1}{a^3}\left(ax+b-2b\ln|ax+b|-\frac{b^2}{ax+b}\right)+C$$ $$\int\frac{{\rm d}x}{x(ax+b)^2}=\int\frac{1}{b^2x}-\frac{a}{b(ax+b)^2}-\frac{a}{b^2(ax+b)}{\rm d}x$$ $$=\frac{1}{b(ax+b)}-\frac{1}{b^2}\ln\left|\frac{ax+b}{x}\right|+C$$ (II) $$\int\sqrt{ax+b}\ {\rm d}x=\frac{1}{a}\int\sqrt{ax+b}\ {\rm d}(ax+b)=\frac{2}{3a}\sqrt{(ax+b)^3}+C$$
$$\int x\sqrt{ax+b}\ {\rm d}x=\frac{1}{a^2}\int(ax+b-b)\sqrt{ax+b}\ {\rm d}(ax+b)$$ $$=\frac{1}{a^2}\int\sqrt{(ax+b)^3}-b\sqrt{ax+b}\ {\rm d}(ax+b)$$ $$=\frac{2}{15a^2}(3ax-2b)\sqrt{(ax+b)^3}+C$$
$$\int x^2\sqrt{ax+b}\ {\rm d}x=\frac{1}{a^3}\int (ax)^2\sqrt{ax+b}\ {\rm d}(ax+b)=$$$$=\frac{1}{a^3}\int\left[(ax+b)^2-2abx-b^2\right]\sqrt{ax+b}\ {\rm d}(ax+b)$$ $$=\frac{1}{a^3}\left[\frac{2}{7}\sqrt{(ax+b)^7}-\frac{4b}{15}(3ax-2b)\sqrt{(ax+b)^3}-\frac{2b^2}{3}\sqrt{(ax+b)^3}\right]+C$$ $$=\frac{1}{a^3}\left[\frac{2}{7}(ax+b)^2-\frac{4b}{15}(3ax-2b)-\frac{2b^2}{3}\right]\sqrt{(ax+b)^3}+C$$ $$=\frac{1}{a^3}\left[\frac{2}{7}a^2x^2-\frac{8}{35}abx+\frac{16}{105}b^2\right]\sqrt{(ax+b)^3}+C$$ $$=\frac{2}{105a^3}\left[15a^2x^2-12abx+8b^2\right]\sqrt{(ax+b)^3}+C$$
$$\int \frac{x}{\sqrt{ax+b}}{\rm d}x=\frac{1}{a^2}\int\frac{ax+b-b}{\sqrt{ax+b}}{\rm d}(ax+b)$$ $$=\frac{1}{a^2}\left[\int\sqrt{ax+b}\ {\rm d}(ax+b)-b\int\frac{{\rm d}(ax+b)}{\sqrt{ax+b}}\right]$$ $$=\frac{1}{a^2}\left[\frac{2}{3}(ax+b)-2b\right]\sqrt{ax+b}+C$$ $$=\frac{2}{3a^2}(ax-2b)\sqrt{ax+b}+C$$
    
    <a href="https://upunder.us/posts/lists_of_integrals/">Read more...</a>
    
  </div>
</article>
<article>
  <h1><a href="https://upunder.us/posts/english_grammar/">english grammar</a></h1>
  <time datetime='2024-01-12T00:00:00'>2024.01.12 00:00</time>
  
  <div>
    noun mass noun plural https://www.geeksforgeeks.org/mass-noun/
verb tense 
    
  </div>
</article>
<article>
  <h1><a href="https://upunder.us/posts/number_theory/">number theory</a></h1>
  <time datetime='2024-01-06T00:00:00'>2024.01.06 00:00</time>
  
  <div>
    $$a^n\equiv (a \bmod p)^{n \bmod{\varphi(p)}}\bmod p,p \in\mathbb{P}$$ $$a^n\equiv (a \bmod p)^{n \bmod{p-1}}\bmod p,p \in\mathbb{P}$$
    
  </div>
</article>
<article>
  <h1><a href="https://upunder.us/posts/mnemonic/">mnemonic</a></h1>
  <time datetime='2024-01-04T00:00:00'>2024.01.04 00:00</time>
  
  Tags:
  
  <a href='/tags/math'>math</a>
  
  
  <div>
     t a n x s s i e n c x x 1 c c o s s c x x c o t x s i n h x t c a o n s h h x x 1 s c e o c t h h x x c s c h x 
    
  </div>
</article>
<article>
  <h1><a href="https://upunder.us/posts/cstring/">cstring</a></h1>
  <time datetime='2023-12-17T00:00:00'>2023.12.17 00:00</time>
  
  <div>
    Functions returning void* type: memchr: Searches for the position of a specified character in the string. memcpy: Copies a block of memory. memmove: Moves a block of memory. memset: Sets the values of a block of memory. Functions returning int type: memcmp: Compares blocks of memory. strcmp: Compares strings. strncmp: Compares the first n characters of strings. strcoll: Compares strings according to the localization rules. Functions returning char* type: strcat: Concatenates strings.
    
    <a href="https://upunder.us/posts/cstring/">Read more...</a>
    
  </div>
</article>
<article>
  <h1><a href="https://upunder.us/posts/arithmetic_overflow/">arithmetic overflow</a></h1>
  <time datetime='2023-12-12T00:00:00'>2023.12.12 00:00</time>
  
  <div>
    Using those code to avoid overflow:
#include &lt;stdint.h&gt; #include &lt;stdio.h&gt; const int64_t mod = 0x7fffffffffffffe7LL; // 216289611853439384th prime const int64_t a01 = 0x7fffffffffffff5bLL; const int64_t b01 = 0x7ffffffffffffefdLL; int64_t add64(int64_t a, int64_t b, int64_t m) { a %= m; b %= m; if (m - a &lt; b) return a &gt; b ? a - m + b : b - m + a; else return a + b; } int64_t sub64(int64_t a, int64_t b, int64_t m) { a %= m; b %= m; return a - b &lt; 0 ?
    
    <a href="https://upunder.us/posts/arithmetic_overflow/">Read more...</a>
    
  </div>
</article>
<article>
  <h1><a href="https://upunder.us/posts/linear_algebra/">linear algebra</a></h1>
  <time datetime='2023-12-09T00:00:00'>2023.12.09 00:00</time>
  
  <div>
    matrix identity matrix \[ I_1=\begin{bmatrix} 1 \end{bmatrix}, I_2=\begin{bmatrix} 1 & 0 \\ 0 & 1 \\ \end{bmatrix}, I_3=\begin{bmatrix} 1 & 0 & 0 \\ 0 & 1 & 0 \\ 0 & 0 & 1 \\ \end{bmatrix}, \dots, I_n=\begin{bmatrix} 1 & 0 & 0 & \cdots & 0 \\ 0 & 1 & 0 & \cdots & 0 \\ 0 & 0 & 1 & \cdots & 0 \\ \vdots & \vdots & \vdots & \ddots & \vdots \\ 0 & 0 & 0 & \cdots & 1 \\ \end{bmatrix}.
    
    <a href="https://upunder.us/posts/linear_algebra/">Read more...</a>
    
  </div>
</article>
<article>
  <h1><a href="https://upunder.us/posts/coordinate_system/">coordinate system</a></h1>
  <time datetime='2023-12-08T00:00:00'>2023.12.08 00:00</time>
  
  <div>
    2d cartesian coordinate $$x=r\cos\varphi$$ $$y=r\sin\varphi$$
polar coordinate $$r=\sqrt{x^2+y^2}=\operatorname{hypot}(x,y)$$ $$\varphi=\operatorname{atan2}(y,x)$$
3d cartesian coordinate $$x=r\sin\theta\cos\varphi$$ $$y=r\sin\theta\sin\varphi$$ $$z=r\cos\varphi$$
spherical coordinate $$r=\sqrt{x^2+y^2+z^2}$$ $$\theta=\arccos\frac{z}{r}$$ $$\varphi=\operatorname{atan2}(y,x)$$
    
  </div>
</article>
<div class="pagination">
  

  <span class="page-number">1 of 7</span>

  
  <a class="next-page" href="/page/2/">Next Page</a>
  
</div>

</main>
<aside class="latest-posts">
  <div>
    <div class="section-header">
      <h3>LATEST POSTS</h3>
    </div>
    <div class="post-list">
      <ul>
        
        <li><a href="/posts/code_with_magic/">C Code with magic</a></li>
        
        <li><a href="/posts/quaternion/">quaternion</a></li>
        
        <li><a href="/posts/lists_of_integrals/">lists of integrals</a></li>
        
        <li><a href="/posts/english_grammar/">english grammar</a></li>
        
        <li><a href="/posts/number_theory/">number theory</a></li>
        
      </ul>
    </div>
  </div>
</aside>


    <footer class="site-footer">
  <p>2024 <a href="https://upunder.us">up under us</a></p>
</footer>

  </body>
</html>
